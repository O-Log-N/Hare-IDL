

@@BEGIN-TEMPLATE NAME="MAIN" TYPE="ROOT"
@@OPEN-OUTPUT-FILE FILENAME="output.h"
#include "simple_lib.h"

// structures

  @@INCLUDE TEMPLATE="MAP_3"
  
// serialization

  @@INCLUDE TEMPLATE="ROOT_3"
  
// deserialization

  @@INCLUDE TEMPLATE="ROOT_4"
  
// printing

  @@INCLUDE TEMPLATE="ROOT_5"
@@CLOSE-OUTPUT-FILE
@@END-TEMPLATE NAME="MAIN"


@@BEGIN-TEMPLATE NAME="MAP_3" TYPE="ROOT"
  @@FOR-EACH-OF PUBLISHABLE-STRUCTS() TYPE="STRUCT" TEMPLATE="MAP-S-CALLING"
@@END-TEMPLATE NAME="MAP_3"


@@BEGIN-TEMPLATE NAME="ROOT_3" TYPE="ROOT"
// structs
  @@FOR-EACH-OF PUBLISHABLE-STRUCTS() TYPE="STRUCT" TEMPLATE="SERIALIZE-S-CALLING-ALT"
// du
  @@FOR-EACH-OF PUBLISHABLE-DISCRIMINATED-UNIONS() TYPE="DISCRIMINATED-UNION" TEMPLATE="SERIALIZE-DU"
@@END-TEMPLATE NAME="ROOT_3"


@@BEGIN-TEMPLATE NAME="ROOT_4" TYPE="ROOT"
  @@FOR-EACH-OF PUBLISHABLE-STRUCTS() TYPE="STRUCT" TEMPLATE="DESERIALIZE-S-CALLING-ALT"
@@END-TEMPLATE NAME="ROOT_4"


@@BEGIN-TEMPLATE NAME="ROOT_5" TYPE="ROOT"
  @@FOR-EACH-OF PUBLISHABLE-STRUCTS() TYPE="STRUCT" TEMPLATE="PRINT-S"
@@END-TEMPLATE NAME="ROOT_5"
