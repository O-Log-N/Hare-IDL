

@@BEGIN-TEMPLATE ROOT_ TYPE=ROOT_
@@FOR-EACH-PUBLISHABLE-STRUCT BEGIN
@@OPEN-OUTPUT-FILE "IDL_@STRUCT-NAME@.java"
@@INCLUDE TEMPLATE SERIALIZE-S
@@CLOSE-OUTPUT-FILE
@@FOR-EACH-PUBLISHABLE-STRUCT END
@@END-TEMPLATE ROOT_

@@BEGIN-TEMPLATE ROOT TYPE=ROOT
@@OPEN-OUTPUT-FILE "output.h"
@@FOR-EACH-PUBLISHABLE-STRUCT TEMPLATE SERIALIZE-S
@@CLOSE-OUTPUT-FILE
@@END-TEMPLATE ROOT

@@BEGIN-TEMPLATE SERIALIZE-S TYPE=STRUCT
void serialize@STRUCT-NAME@( @STRUCT-NAME@& s, OStream& o ) {
@@FOR-EACH-OF-MEMBERS BEGIN
@@IF @MEMBER-TYPE@ == bool
   o.writeByte(s.@MEMBER-NAME@);
@@ELIF @MEMBER-TYPE@ == float
   o.writeFloat(s.@MEMBER-NAME@);
@@ELIF @MEMBER-TYPE@ == double
   o.writeDouble(s.@MEMBER-NAME@);
@@ELIF @MEMBER-TYPE@ == UINT8
   o.writeByte(s.@MEMBER-NAME@);
@@ELIF @MEMBER-TYPE@ == UINT16
   o.writeINT16(s.@MEMBER-NAME@);
@@ELIF @MEMBER-TYPE@ == Animation
   o.writeAnimation(s.@MEMBER-NAME@);
@@ELIF @MEMBER-TYPE@ == MyInventory
   o.writeMyInventory(s.@MEMBER-NAME@);
@@ELSE
   @@ASSERT 0
@@ENDIF
@@FOR-EACH-OF-MEMBERS END
}
@@END-TEMPLATE SERIALIZE-S

@@BEGIN-TEMPLATE MAP-S TYPE=STRUCT
typedef _@STRUCT-NAME@ {
@@FOR-EACH-OF-MEMBERS BEGIN
   @MEMBER-TYPE@ @MEMBER-NAME@;
@@FOR-EACH-OF-MEMBERS END
} @STRUCTNAME@;
@@END-TEMPLATE MAP-S
